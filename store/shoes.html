<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <title>Shoes</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="stylesheet" href="./public/css/bootstrap.min.css">

      <link rel="stylesheet" href="./public/css/style.css">

   </head>
   <!-- body -->
   <body class="main-layout">
	<!-- header section start -->
	<div class="header_section header_main">
		<div class="container">
			<div class="row">
				<div class="col-sm-3">
					<div class="logo"><a href="#"><img src="/public/images/logo.png"></a></div>
				</div>
				<div class="col-sm-9">
					<nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                        </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav">
                           <a class="nav-item nav-link" href="/">Home</a>
                           <a class="nav-item nav-link" href="/shoes">Shoes</a>
                        </div>
                    </div>
                    </nav>
				</div>
			</div>
		</div>
	</div>
	<!-- New Arrivals section start -->
  <div class="collection_text">Shoes</div>
  <div class="filters">
  <select id="brand-filter" class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none">
   <option value="">All Brands</option>
   <option value="Nike">Nike</option>
   <option value="Adidas">Adidas</option>
   <option value="Converse">Converse</option>
   <option value="Vans">Vans</option>
 </select>
 
 <select id="color-filter" class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none">
   <option value="">All Colors</option>
   <option value="White">White</option>
   <option value="Red">Red</option>
   <option value="Black">Black</option>
   <option value="Green">Green</option>
   <option value="Navy">Navy</option>
 </select>
 </div>

  

   
 <select id="sort-filter">
   <option value="">Sort by</option>
   <option value="price-asc">Price: Low to High</option>
   <option value="price-desc">Price: High to Low</option>
</select>
<div id="pagination" class="pagination"></div>


  <section id="sneakers-list">
   <h1>Sneakers</h1>
   <div id="sneakers-container"></div>
 </section>

	<div class="copyright">2025 All Rights Reserved.</div>

   </body>

   <script>
      const API_URL = "http://localhost:8080/sneakers";
      let currentPage = 1;
      const itemsPerPage = 5;
      
      async function fetchSneakers() {
        try {
          const response = await fetch(API_URL);
          const sneakers = await response.json();
          renderSneakers(sneakers, currentPage, itemsPerPage);
          setupPagination(sneakers.length, itemsPerPage);
        } catch (error) {
          console.error("Error fetching sneakers:", error);
        }
      }
      
      function renderSneakers(sneakers, page, itemsPerPage) {
        const container = document.getElementById("sneakers-container");
        container.innerHTML = "";
      
        const start = (page - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const paginatedSneakers = sneakers.slice(start, end);
      
        paginatedSneakers.forEach(sneaker => {
          const sneakerCard = document.createElement("div");
          sneakerCard.className = "sneaker-card";
      
          sneakerCard.innerHTML = `
            <h2>${sneaker.model}</h2>
            <p>Brand: ${sneaker.brand}</p>
            <p>Color: ${sneaker.color}</p>
            <p>Price: $${sneaker.price}</p>
          `;
      
          container.appendChild(sneakerCard);
        });
      }



      function applyFiltersAndRender() {
         const brand = document.getElementById("brand-filter").value;
         const color = document.getElementById("color-filter").value;
         const sortOption = document.getElementById("sort-filter").value;

         let filteredSneakers = allSneakers.filter(sneaker => {
             return (
                 (!brand || sneaker.brand === brand) &&
                 (!color || sneaker.color === color)
             );
         });

         if (sortOption === "price-asc") {
             filteredSneakers.sort((a, b) => a.price - b.price);
         } else if (sortOption === "price-desc") {
             filteredSneakers.sort((a, b) => b.price - a.price);
         }

         renderSneakers(filteredSneakers, currentPage, itemsPerPage);
         setupPagination(filteredSneakers.length, itemsPerPage);
     }


      
      function setupPagination(totalItems, itemsPerPage) {
        const paginationContainer = document.getElementById("pagination");
        paginationContainer.innerHTML = "";
        const totalPages = Math.ceil(totalItems / itemsPerPage);
      
        for (let i = 1; i <= totalPages; i++) {
          const button = document.createElement("button");
          button.textContent = i;
          button.className = "pagination-btn";
          button.addEventListener("click", () => {
            currentPage = i;
            fetchSneakers();
          });
      
          paginationContainer.appendChild(button);
        }
      }
      
      document.addEventListener("DOMContentLoaded", () => {
         fetchSneakers();


         document.getElementById("brand-filter").addEventListener("change", applyFiltersAndRender);
         document.getElementById("color-filter").addEventListener("change", applyFiltersAndRender);
         document.getElementById("sort-filter").addEventListener("change", applyFiltersAndRender);
      });
      
   </script>
</html>
